(()=>{"use strict";var a,t,e,d=document.querySelector(".button"),n=document.querySelector(".blue_block_items"),c=document.querySelectorAll(".blue_block_items_all"),r=document.querySelector(".main"),o=document.querySelector(".cards"),s=document.querySelector(".cards__btn"),g=document.querySelector(".cards__items"),u=document.getElementById("sec"),i=document.getElementById("min"),m=document.querySelector(".popup--game"),l=document.querySelector(".popup_lost--game"),p=document.querySelector(".popup--failure"),_=document.querySelector(".popup__title--time"),I=document.querySelector(".popup__btn--game"),b={},k=[],j=[{dataId:1,backgroundImage:"6_Club.jpg"},{dataId:2,backgroundImage:"6_Diamond.jpg"},{dataId:3,backgroundImage:"6_Heart.jpg"},{dataId:4,backgroundImage:"6_Spade.jpg"},{dataId:5,backgroundImage:"7__Spade.jpg"},{dataId:6,backgroundImage:"7_Club.jpg"},{dataId:7,backgroundImage:"7_Diamond.jpg"},{dataId:8,backgroundImage:"7_Heart.jpg"},{dataId:9,backgroundImage:"8_Club.jpg"},{dataId:10,backgroundImage:"8_Diamond.jpg"},{dataId:11,backgroundImage:"8_Heart.jpg"},{dataId:12,backgroundImage:"8_Spade.jpg"},{dataId:13,backgroundImage:"9_Club.jpg"},{dataId:14,backgroundImage:"9_Diamond.jpg"},{dataId:15,backgroundImage:"9_Heart.jpg"},{dataId:16,backgroundImage:"9_Spade.jpg"},{dataId:17,backgroundImage:"10_Club.jpg"},{dataId:18,backgroundImage:"10_Diamond.jpg"},{dataId:19,backgroundImage:"10_Heart.jpg"},{dataId:20,backgroundImage:"10_Spade.jpg"},{dataId:21,backgroundImage:"A_Club.jpg"},{dataId:22,backgroundImage:"A_Diamond.jpg"},{dataId:23,backgroundImage:"A_Heart.jpg"},{dataId:24,backgroundImage:"A_Spade.jpg"},{dataId:25,backgroundImage:"J_Club.jpg"},{dataId:26,backgroundImage:"J_Diamond.jpg"},{dataId:27,backgroundImage:"J_Heart.jpg"},{dataId:28,backgroundImage:"J_Spade.jpg"},{dataId:29,backgroundImage:"K_Club.jpg"},{dataId:30,backgroundImage:"K_Diamond.jpg"},{dataId:31,backgroundImage:"K_Heart.jpg"},{dataId:32,backgroundImage:"K_Spade.jpg"},{dataId:33,backgroundImage:"Q_Club.jpg"},{dataId:34,backgroundImage:"Q_Diamond.jpg"},{dataId:35,backgroundImage:"Q_Heart.jpg"},{dataId:36,backgroundImage:"Q_Spade.jpg"}];function v(a,t){var e=j.slice(a,t),d=e.slice(),n=e.concat(d);return n.shuffle(),n}Array.prototype.shuffle=function(){for(var a=this.length-1;a>=0;a--){var t=Math.floor(Math.random()*(a+1)),e=this[t];this[t]=this[a],this[a]=e}return this};var f=document.createDocumentFragment(),h=document.createElement("img");function L(a){return j.shuffle(),a.classList.remove("cards__item--turned"),c[1].classList.contains("form__active")?(v(0,6),y()):c[2].classList.contains("form__active")?(v(0,9),y()):(v(0,3),y()),b}f.appendChild(h),h.classList.add("cards__item");var y=function(){for(var a=0;a<k.length;a++){var t=(e=a,d=void 0,(d=document.createElement("img")).dataset.id=k[e].dataId,d.dataset.bg=k[e].backgroundImage,d.style.backgroundImage=b.shirt,d.src="./img/shirt.jpg",d);t.className="cards__item",k.length<18&&(t.className="cards__item  cards__item--low-difficulty"),k.length>18&&(t.className="cards__item"),g&&g.appendChild(t)}var e,d};function S(a,t,e){u&&(a=Number(u.textContent)),i&&(t=Number(i.textContent)),a++,e&&(a=0,t=0),a>=60&&(a=0,t++),a<10&&(a="0"+a),t<10&&(t="0"+t),u&&(u.textContent=a),i&&(i.textContent=t)}g&&g.addEventListener("click",(function(d){var n=d.target;if(n)if(n.classList.contains("cards__item--turned")&&!n.classList.contains("cards__items"))n.style.backgroundImage=b.shirt,n.classList.toggle("cards__item--turned"),e=null,t=null;else if(!n.classList.contains("cards__items")){n.classList.toggle("cards__item--turned"),setTimeout((function(){n&&(n.style.backgroundImage="url('./img/"+n.getAttribute("data-bg")+"')")}),300);for(var c=document.querySelectorAll(".cards__item"),r=0,o=0;o<c.length;o++)if(c[o].classList.contains("cards__item--turned")&&r++,1==r&&c[o].classList.contains("cards__item--turned")&&(e||(e=c[o].getAttribute("data-id")),t||(t=o)),2==r){n.getAttribute("data-id")==e?(clearInterval(a),_&&(_.textContent=min.textContent+" . "+sec.textContent),m&&(m.classList.contains("popup--show")||m.classList.add("popup--show"))):(clearInterval(a),_&&(_.textContent=min.textContent+" . "+sec.textContent),l&&(l.classList.contains("popup--show")||l.classList.add("popup--show")));break}}})),n&&n.addEventListener("click",(function(a){for(var t=a.target,e=0;e<c.length;e++)c[e].classList.remove("form__active");t&&t.classList.add("form__active"),n.classList.remove("form__active")})),d&&d.addEventListener("click",(function(t){t.preventDefault(),c?(r&&(r.style.display="none"),o&&(o.style.display="block"),L(h),a=setInterval(S,1e3)):p&&p.classList.add("popup--show")}));var C=function(){clearInterval(a),S(0,0,1),o&&(o.style.display="none"),r&&(r.style.display="block"),g&&(g.innerHTML=""),o&&o.removeEventListener("click",C)};s&&s.addEventListener("click",C),I&&I.addEventListener("click",(function(t){m&&m.classList.contains("popup--show")&&m.classList.remove("popup--show"),l&&l.classList.contains("popup--show")&&l.classList.remove("popup--show"),g&&(g.innerHTML=""),S(0,0,1),L(h),a=setInterval(S,1e3)}))})();